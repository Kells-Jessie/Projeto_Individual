<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <link rel="stylesheet" href="./css/quiz.css"/>
</head>

<body>
    <div class="bannerJogo">
        <div id="quiz" class="Quiz">
            <h2 id="titulo">Ajude o calicifer!</h2>
            <button id="iniciar" onclick="comecarJogo()">Iniciar</button>
        </div>
        <div id="mostrarQuiz" class="bannerQuiz">
            <div id="containerQuiz" class="containerQuiz">
                <div class="perguntas" style="display:none"></div>
                <div id="respostas" class="respostas" style="display:none;">;
                    <button></button><button></button>
                    <button></button><button></button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
<script>

    var listaQuestoes = [

        [`<div class="perguntas">Qual é o primeiro filme produzido pelo Studio Ghibli?</div>
    <div id="respostas" class="respostas">
    <button id="alternativa1" onclick="respostaCerta(),alterarCores()">Nausicaä do Vale do Vento (1984)</button>
    <button id="alternativa2" onclick="alterarCores()">O Castelo Animado (2004)</button>
    <button id="alternativa3" onclick="alterarCores()">Meu Vizinho Totoro (1988)</button>
    <button id="alternativa4" onclick="alterarCores()">A Viagem de Chihiro (2001)</button></div>`,
        ],

        [`<div class="perguntas">Quem é o fundador do Studio Ghibli?</div>
  <div id="respostas" class="respostas">
  <button id="alternativa2" onclick="alterarCores()">Isao Takahata</button>
  <button id="alternativa1" onclick="respostaCerta(),alterarCores()">Hayao Miyazaki e Isao Takahata</button>
  <button id="alternativa3" onclick="alterarCores()">Hayao Miyazaki</button>
  <button id="alternativa4" onclick="alterarCores()">Toshio Suzuki</button></div>`
        ],

        [`<div class="perguntas">De que filme eu sou? Meu nome é calicifer</div>
  <div id="respostas" class="respostas">
  <button id="alternativa2" onclick="alterarCores()">A Princesa Mononoke (1997)</button>
  <button id="alternativa3" onclick="alterarCores()">O Serviço de Entregas da Kiki (1989)</button>
  <button id="alternativa4" onclick="alterarCores()">O Conto da Princesa Kaguya (2013)</button>
  <button id="alternativa1" onclick="respostaCerta(),alterarCores()">O castelo Animado</button></div>`

        ],

        [`<div class="perguntas">Em "O Castelo Animado", qual é a maldição que atinge o protagonista, Howl?</div>
  <div id="respostas" class="respostas">
  <button id="alternativa2" onclick="alterarCores()">Se transformar em uma árvore</button>
  <button id="alternativa3" onclick="alterarCores()">Encolher até ficar do tamanho de uma formiga</button>
  <button id="alternativa1" onclick="respostaCerta(),alterarCores()">Ele se transforma em um pássaro humano</button>
  <button id="alternativa4" onclick="alterarCores()">TA morte</button></div>`
        ],

        [`<div class="perguntas">"Qual filme do Studio Ghibli explora a relação entre humanos e deuses da floresta?</div>
  <div id="respostas" class="respostas">
  <button id="alternativa1" onclick="respostaCerta(),alterarCores()">Princesa Mononoke - (1997)</button>
  <button id="alternativa2" onclick="alterarCores()">Meu Vizinho Totoro (1988)</button>
  <button id="alternativa3" onclick="alterarCores()">Omoide no Mânî (2014)</button>
  <button id="alternativa4" onclick="alterarCores()">Ponyo - Uma Amizade que Veio do Mar (2008)</button></div>`
        ],

        [`<div class="perguntas">Quem é o diretor de "O Conto da Princesa Kaguya" (2013)?</div>
  <div id="respostas" class="respostas">
  <button id="alternativa2" onclick="alterarCores()">Isao Takahata</button>
  <button id="alternativa3" onclick="alterarCores()">Hayao Miyazaki</button>
  <button id="alternativa1" onclick="respostaCerta(),alterarCores()">Makoto Shinkai</button>
  <button id="alternativa4" onclick="alterarCores()">Toshio Suzuki</button></div>`],

        [`<div class="perguntas">Qual filme do Studio Ghibli apresenta a personagem Marnie?</div>
  <div id="respostas" class="respostas">
  <button id="alternativa2" onclick="alterarCores()">A Viagem de Chihiro (2001)</button>
  <button id="alternativa3" onclick="alterarCores()">Túmulo dos Vagalumes (1988)</button>
  <button id="alternativa4" onclick="alterarCores()">O Serviço de Entregas da Kiki</button>
  <button id="alternativa1" onclick="respostaCerta(),alterarCores()">When Marnie Was There</button></div>`
        ],

        [`<div class="perguntas">Em "Túmulo dos Vagalumes" (1988), qual é o relacionamento entre Seita e Setsuko?</div>
  <div id="respostas" class="respostas">
  <button id="alternativa2" onclick="alterarCores()">Primos</button>
  <button id="alternativa3" onclick="alterarCores()">Amigos</button>
  <button id="alternativa1" onclick="respostaCerta(),alterarCores()">Irmãos</button>
  <button id="alternativa4" onclick="alterarCores()">Conhecidos</button></div>`],

        [`<div class="perguntas">Qual é o tema principal de "Porco Rosso" (1992)?</div>
    <div id="respostas" class="respostas">
    <button id="alternativa1" onclick="respostaCerta(),alterarCores()">A aviação e a busca pela paz</button>
    <button id="alternativa2" onclick="alterarCores()">Exploração espacial</button>
    <button id="alternativa3" onclick="alterarCores()">A busca por tesouros perdidos</button>
    <button id="alternativa4" onclick="alterarCores()">Ajudar a mineira</button></div>`
        ],

        [`<div class="perguntas">Quem é a protagonista de "Whisper of the Heart" (1995)?</div>
  <div id="respostas" class="respostas">
  <button id="alternativa2" onclick="alterarCores()">Kiki</button>
  <button id="alternativa1" onclick="respostaCerta(),alterarCores()">Shizuku Tsukishima</button>
  <button id="alternativa3" onclick="alterarCores()">Sophie</button>
  <button id="alternativa4" onclick="alterarCores()">Kaguya</button></div>`],
    ];

    var Total = 0;
    var containerQuiz = document.getElementById("containerQuiz");
    var transformarBotao = document.getElementById("iniciar");
    var clique = 0;
    var posicao = 0;

    function comecarJogo() {
        transformarBotao.innerHTML = `Próxima questão`;
        document.getElementById('titulo').style.display = 'none';

        posicao += 1;
        if (clique < listaQuestoes.length) {
            containerQuiz.innerHTML = listaQuestoes[posicao - 1];
        }

        clique += 1;

        if (posicao > listaQuestoes.length) {
            containerQuiz.innerHTML = `Você fez ${Total} pontos de ${listaQuestoes.length} <button onclick="sair()">Voltar ao perfil</button>`;
        }

    }

    function respostaCerta() {
        Total += 1;

    }

    function alterarCores() {
        alternativa1.style.backgroundColor = "green";
        alternativa2.style.backgroundColor = "red";
        alternativa3.style.backgroundColor = "red";
        alternativa4.style.backgroundColor = "red";
    }

    function sair() {
        fetch("/quiz/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                idUsuarioServer: sessionStorage.ID_USUARIO,
                qtdAcertosServer: Total

            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {

                    setTimeout(() => {
                        window.location = "perfil.html";
                    }, "2000");

                } else {
                    throw "Houve um erro ao tentar realizar o cadastro!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

        return false;

    }


</script>